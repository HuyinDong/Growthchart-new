
<head>
  <meta charset="utf-8">
 <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head> 

<body>

<div id="paired-line-chart">
<script type="text/javascript">
   var  w = 500,
        h = 500,
        p = 30,
        x = d3.scale.linear().domain([ 0, 50 ]).range([0, w]),
        y = d3.scale.linear().domain([0, 50]).range([h, 0]);
        //y = d3.scale.linear().domain([0, maxval]).range([h, 0]);

   var vis = d3.select("#paired-line-chart")
      // .data([val_array1])
     .append("svg:svg")
       .attr("width", w )
       .attr("height", h );
    // .append("svg:g")
    //   .attr("transform", "translate(" + p + "," + p + ")");
   var mydata = [
		{"x":50,"y":100,"r":10},
		{"x":200,"y":80,"r":10},
		{"x":80,"y":160,"r":10},
   ];
   var circles = vis.selectAll("circle")
	.data(mydata)
	.enter()
	  .append("circle")
	  .attr("cx",function(d){return d.x;})
	  .attr("cy",function(d){return d.y;})
	  .attr("r",function(d){return d.r;})
	  .style("fill","green");
 
  var mygroup = vis.append("g")
	.style("width",50)
	.style("height",20); 	
   var myrec = mygroup.append("svg:rect")
	.attr("width",50)
	.attr("height",20)
//	.attr("x",100)
//	.attr("y",100)
	.style("stroke-width",1)
	.style("fill","white")
	.style("stroke","black"); 

var mytext = mygroup.append("text")
	.attr("text-anchor","middle")
	.attr("transform","translate(20,12)");
//var ppath = document.querySelector(myrec);

var pt = vis.node().createSVGPoint();

	

circles.each(function(){
//	this.addEventListener("mouseover",function(evt){
	this.onmouseover = function(evt){
	pt.x = evt.clientX;
	pt.y = evt.clientY;
	var ppoint = pt.matrixTransform(vis.node()
		.getScreenCTM().inverse()); //this point show svg point
	mygroup
//.attr("x",ppoint.x)
//	     .attr("y",ppoint.y)
	     .attr("transform","translate("+(ppoint.x-60)+","+
		(ppoint.y+10)+")");
	mytext
//.attr("x",ppoint.x)
//	     .attr("y",ppoint.y)
	     .attr("font-size",7)
	     .style("padding-left",10)
//	     .attr("transform","translate(-58,20)")
	     .text(ppoint.x.toFixed(0)+","+ppoint.y.toFixed(0));
	     
//	alert(x.invert(ppoint.x)+","+y.invert(ppoint.y));
//	alert(pt.x+","+pt.y);
//	alert("hello");
//	var myy = 1;
}});
//})});
</script>
</div>
</body>
